<!DOCTYPE html>
<html>
<head>
<title>Hug Day ü§ó</title>
<link rel="stylesheet" href="style.css">

<style>

#content{margin-top:25px;}

#envelope{
  width:300px;
  cursor:pointer;
  margin-top:20px;
  border-radius: 20%;
}

#messageBox{
  max-width:500px;
  margin-top:20px;
}

#typeText{
  white-space:pre-line;
  min-height:120px;
  font-size:20px;
}

#holdBtn{
  display:none;
  margin-top:20px;
}

#finalMessage{
  display:none;
  margin-top:20px;
}

#nextBtn{
  margin-top:20px;
}

</style>
</head>
<body>

<audio id="bgm" autoplay loop src="music/love.mp3"></audio>

<div class="container">

<img id="rose-img" src="photos/p33.jpg">

<h1>ü§ó Hug Day ü§ó</h1>

<p id="timer"></p>

<button id="unlock" style="display:none">Unlock ü§ó</button>

<div id="content" class="hidden">

<img src="photos/hug.png" id="envelope">

<p id="openText"></p>

<div id="messageBox" class="hidden">

<p id="typeText"></p>

<button id="holdBtn">Hold to feel my hug ü§ó</button>

<div id="finalMessage">

<h3>
Aagya mai apne motu ke paas, Acha fir hug krn ke liye pehle to ankhen band kr...<br>
Aur ek inna tight hug kr ki mai yha tak feel kr sku tight se kri ha ü§çü§ó‚ù§Ô∏è<br>
</h3>

<button id="nextBtn" onclick="location.href='date.html'">
Next ‚û°Ô∏è
</button>

</div>

</div>

</div>

</div>


<script src="hearts.js"></script>
<script src="photos.js"></script>
<script src="timer.js"></script>


<script>

startCountdown(new Date(2026, 1, 12, 0, 0, 0));

const music=document.getElementById("bgm");
music.volume=0.07;

startPhotos();


const unlockBtn=document.getElementById("unlock");
const content=document.getElementById("content");

const envelope=document.getElementById("envelope");
const openText=document.getElementById("openText");

const messageBox=document.getElementById("messageBox");
const typeText=document.getElementById("typeText");

const holdBtn=document.getElementById("holdBtn");
const finalMessage=document.getElementById("finalMessage");


/* CRITICAL FIX ‚Äî prevent timer.js from auto showing content */
content.classList.add("hidden");


/* Unlock button */
unlockBtn.onclick=function(){

  if(window.unlock) window.unlock();

  unlockBtn.style.display="none";
  document.getElementById("timer").style.display="none";

  content.classList.remove("hidden");

  stopPhotos();
};


/* Envelope click */
envelope.onclick=function(){

  envelope.style.display="none";
  openText.style.display="none";

  messageBox.classList.remove("hidden");

  startTyping();
};


/* Typewriter */
const message=
`If I could right now,
I would wrap you in my arms,
hold you close,
and let you feel how safe and loved you are ü§ç

Ek bhot bhot bhot tight aur pyara hug motu le liye ü´Ç`;

let i=0;

function startTyping(){

  typeText.innerHTML="";

  function type(){

    if(i<message.length){

      typeText.innerHTML+=message.charAt(i);

      i++;

      setTimeout(type,150);

    }
    else{

      holdBtn.style.display="inline-block";

    }

  }

  type();
  cancelHold()
}


/* Hold system */
let holdTimer;

holdBtn.onmousedown=function(){

  holdBtn.innerText="Making connection with ashiii... ü§ó";

  holdTimer=setTimeout(function(){

    holdBtn.style.display="none";

    finalMessage.style.display="block";

    heartBurst();

  },4000);

};

holdBtn.onmouseup=cancelHold;
holdBtn.onmouseleave=cancelHold;

function cancelHold(){

  clearTimeout(holdTimer);

  holdBtn.innerText="Hold krne me tu bhi hug kr skta merko ü§ó";
}


/* Hearts */
function heartBurst(){

  for(let i=0;i<30;i++){

    const heart=document.createElement("div");

    heart.className="heart";

    heart.style.left=Math.random()*100+"vw";

    heart.style.animationDuration=(2+Math.random()*2)+"s";

    document.body.appendChild(heart);

    setTimeout(()=>heart.remove(),4000);

  }
}

</script>

</body>
</html>