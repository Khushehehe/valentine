<!DOCTYPE html>
<html>
<head>
<title>Propose Day ğŸ’</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<audio id="bgm" autoplay loop src="music/love.mp3"></audio>

<div class="container">
  <img id="rose-img" src="photos/p28.jpg">
  <h1>ğŸ’ Propose Day ğŸ’</h1>
  <p id="timer"></p>

  <button id="unlock" style="display:none" onclick="unlock()">Unlock ğŸ’</button>

  <div id="content" class="hidden">
    <p id="proposalText" style="font-size: large;">
      <b>Ummm Ek baat kehni thi bde time se vo na actuaallllllly merko naa aaaap na bhott sundar lgta hoâ¤ï¸<br>
      kya mujhe aapke sath life time rehne ki permission mil skti h, promise mai hmesa aapko princess ki trah rkhuga hmesa hmesa<br>
      Kya aap rhoge mere sath.</b>
    </p>

    <!-- <div class="password hidden" id="passwordBox">
      Password:<br><b>135</b>
    </div> -->


    <!-- YES / NO -->
    <div id="choice-box">
      <button id="yesBtn" onclick="yesClicked()">YES ğŸ’–</button>
      <button id="noBtn">NO ğŸ™ˆ</button>
    </div>

    <!-- After YES -->
    <div id="yesMessage" class="hidden">
      <h2>
        Yeyyyyyyyyyyyyyyyyyyyyyyy Ab mujhe aur kya hi chahiye hoga jab mere paas duniya ki sabse sundar wife already hai..ğŸ¥¹â¤ï¸<br>
        I promise to love you more every single day ğŸ’<br><br> Box me Mere msg ka reply krke yaad se rkhdi i hope reply me kuch acha hi hoga<br><br>
      </h2>

      <button class="hold-btn">Hold to unlock â¤ï¸</button>

      <div class="password hidden">
        Password:<t></t>
        <b>806</b><br>
        <b>Chal jldi jldi krle open box ab</b>
      </div>

      <button class="next-btn hidden" style="display:none"
              onclick="location.href='date.html'">
        Next â¡ï¸
      </button>
    </div>
  </div>
</div>

<!-- ğŸ¥ VIDEO OVERLAY (HIDDEN BY DEFAULT) -->
<div id="videoOverlay" class="hidden">
  <video id="ringVideo" src="videos/ring.mp4" playsinline muted></video>
</div>

<script src="hearts.js"></script>
<script src="timer.js"></script>

<script>
// â³ countdown (test date)
startCountdown(new Date(2026, 1, 8, 0, 0, 0));

// ğŸ¶ background music
const bgm = document.getElementById("bgm");
bgm.volume = 0.07;

// ğŸ”“ unlock page
function unlock(){
  document.getElementById("content").classList.remove("hidden");
  document.getElementById("unlock").style.display = "none";
  document.getElementById("timer").style.display = "none";
}

// ğŸš« NO BUTTON â€” NEVER CLICKABLE
const noBtn = document.getElementById("noBtn");

function moveNo(){
  const x = Math.random() * 300 - 150;
  const y = Math.random() * 300 - 150;
  noBtn.style.transform = `translate(${x}px, ${y}px)`;
}

noBtn.addEventListener("mouseenter", moveNo);
noBtn.addEventListener("mousemove", moveNo);
noBtn.addEventListener("click", e => {
  e.preventDefault();
  moveNo();
});

// ğŸ’– YES â†’ VIDEO â†’ BACK â†’ MESSAGE
function yesClicked(){
  // ğŸ”¹ hide proposal question immediately
  document.getElementById("proposalText").style.display = "none";

  // ğŸ”¹ hide choice buttons
  document.getElementById("choice-box").style.display = "none";

  const overlay = document.getElementById("videoOverlay");
  const video = document.getElementById("ringVideo");

  overlay.classList.remove("hidden");
  overlay.style.display = "block";
  overlay.classList.add("fade-in");

  bgm.volume = 0.02;

  video.currentTime = 0;
  video.play();

  video.onended = () => {
    overlay.classList.remove("fade-in");
    overlay.classList.add("fade-out");

    setTimeout(()=>{
      overlay.classList.add("hidden");
      overlay.style.display = "none";
      overlay.classList.remove("fade-out");

      bgm.volume = 0.07;

      // ğŸ’– show message + PASSWORD after video
      document.getElementById("yesMessage").classList.remove("hidden");
      document.getElementById("passwordBox").classList.remove("hidden");
      hidePass();

      setTimeout(()=>{
        document.querySelector(".next-btn").style.display = "inline-block";
      },1500);
    },800);
  };
  setupHoldToUnlock();
}

</script>
<script>
function setupHoldToUnlock(){

  const holdBtn = document.querySelector(".hold-btn");
  const passwordBox = document.querySelector(".password");
  const nextBtn = document.querySelector(".next-btn");

  let holdTimer;

  holdBtn.onmousedown = () => {

    holdBtn.innerText = "Unlocking... â¤ï¸";

    holdTimer = setTimeout(()=>{

      holdBtn.style.display = "none";

      passwordBox.classList.remove("hidden");

      if(nextBtn) nextBtn.classList.remove("hidden");

      heartBurst();

    },3000);
  };

  holdBtn.onmouseup = cancel;
  holdBtn.onmouseleave = cancel;

  function cancel(){
    clearTimeout(holdTimer);
    holdBtn.innerText = "Hold to unlock â¤ï¸";
  }

}
</script>
</body>
</html>
